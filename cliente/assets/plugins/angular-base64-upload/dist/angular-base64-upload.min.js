/*! angular-base64-upload - v0.1.20
* https://github.com/adonespitogo/angular-base64-upload
* Copyright (c) Adones Pitogo <pitogo.adones@gmail.com> [June 29, 2016]
* Licensed MIT */

!function(a,b){"use strict";a._arrayBufferToBase64=function(b){for(var c="",d=new Uint8Array(b),e=d.byteLength,f=0;f<e;f++)c+=String.fromCharCode(d[f]);return a.btoa(c)};var c=a.angular.module("naif.base64",[]);c.directive("baseSixtyFourInput",["$window","$q",function(a,c){for(var d={onChange:"&",onAfterValidate:"&",parser:"&"},e=["onabort","onerror","onloadstart","onloadend","onprogress","onload"],f=e.length-1;f>=0;f--){var g=e[f];d[g]="&"}return{restrict:"A",require:"ngModel",scope:d,link:function(d,f,g,h){function i(){var b,d=[];for(b=u.length-1;b>=0;b--)u[b].deferredObj=c.defer(),d.push(u[b].deferredObj.promise);for(c.all(d).then(o),b=u.length-1;b>=0;b--){var e=new a.FileReader,f=u[b],g={};g.filetype=f.type,g.filename=f.name,g.filesize=f.size,l(e,f,g),e.readAsArrayBuffer(f)}}function j(a){g.onChange&&d.onChange()(a,u)}function k(a){if(g.onAfterValidate){for(var b=[],e=u.length-1;e>=0;e--)b.push(u[e].deferredObj.promise);c.all(b).then(function(){d.onAfterValidate()(a,v,u)})}}function l(a,b,c){for(var f=e.length-1;f>=0;f--){var h=e[f];g[h]&&"onload"!==h&&m(h,d[h],a,b,c)}a.onload=n(a,b,c)}function m(a,b,c,d,e){c[a]=function(a){b()(a,c,d,u,v,e)}}function n(e,f,h){return function(i){var j,k=i.target.result,l=g.maxsize&&f.size>1024*g.maxsize;g.doNotParseIfOversize!==b&&l?h.base64=null:h.base64=a._arrayBufferToBase64(k),j=g.parser?c.when(d.parser()(f,h)):c.when(h),j.then(function(a){v.push(a),f.deferredObj.resolve()}),g.onload&&d.onload()(i,e,f,u,v,h)}}function o(){var a=g.multiple?v:v[0];h.$setViewValue(a),r(a),s(a),p(a),q(a),t(a)}function p(a){if(g.maxnum&&g.multiple&&a){var b=a.length<=parseInt(g.maxnum);h.$setValidity("maxnum",b)}return a}function q(a){if(g.minnum&&g.multiple&&a){var b=a.length>=parseInt(g.minnum);h.$setValidity("minnum",b)}return a}function r(a){var b=!0;if(g.maxsize&&a){var c=1e3*parseFloat(g.maxsize);if(g.multiple)for(var d=0;d<a.length;d++){var e=a[d];if(e.filesize>c){b=!1;break}}else b=a.filesize<=c;h.$setValidity("maxsize",b)}return a}function s(a){var b=!0,c=1e3*parseFloat(g.minsize);if(g.minsize&&a){if(g.multiple)for(var d=0;d<a.length;d++){var e=a[d];if(e.filesize<c){b=!1;break}}else b=a.filesize>=c;h.$setValidity("minsize",b)}return a}function t(a){var b,c,d,e=!0;if(g.accept&&(c=g.accept.trim().replace(/[,\s]+/gi,"|").replace(/\./g,"\\.").replace(/\/\*/g,"/.*"),b=new RegExp(c)),g.accept&&a){if(g.multiple)for(var f=0;f<a.length;f++){var i=a[f];if(d="."+i.filename.split(".").pop(),e=b.test(i.filetype)||b.test(d),!e)break}else d="."+a.filename.split(".").pop(),e=b.test(a.filetype)||b.test(d);h.$setValidity("accept",e)}return a}if(h){var u=[],v=[];f.on("change",function(a){a.target.files.length&&(v=[],v=angular.copy(v),u=a.target.files,i(),j(a),k(a))}),h.$isEmpty=function(a){return!a||(angular.isArray(a)?0===a.length:!a.base64)},d._clearInput=function(){f[0].value=""},d.$watch(function(){return h.$viewValue},function(a,b){h.$isEmpty(b)||h.$isEmpty(a)&&d._clearInput()})}}}}])}(window);
//# sourceMappingURL=angular-base64-upload.min.js.map